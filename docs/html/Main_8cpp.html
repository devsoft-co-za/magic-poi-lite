<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Magic Poi Lite: src/Main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Magic Poi Lite<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">IOT LED Poi</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main program file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;ESP8266WiFi.h&gt;</code><br />
<code>#include &lt;ESP8266WiFiMulti.h&gt;</code><br />
<code>#include &lt;EEPROM.h&gt;</code><br />
<code>#include &quot;secrets.h&quot;</code><br />
<code>#include &quot;<a class="el" href="Authentication_8h_source.html">Authentication.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Loading_8h_source.html">Loading.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Playing_8h_source.html">Playing.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for Main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="Main_8cpp__incl.png" border="0" usemap="#asrc_2Main_8cpp" alt=""/></div>
<map name="asrc_2Main_8cpp" id="asrc_2Main_8cpp">
<area shape="rect" title="Main program file." alt="" coords="361,5,464,33"/>
<area shape="rect" title=" " alt="" coords="205,232,289,260"/>
<area shape="poly" title=" " alt="" coords="371,36,333,55,300,83,279,115,265,151,252,217,246,216,260,150,274,113,295,79,330,50,369,31"/>
<area shape="rect" title=" " alt="" coords="416,81,534,109"/>
<area shape="poly" title=" " alt="" coords="425,32,456,67,452,71,421,35"/>
<area shape="rect" title=" " alt="" coords="557,81,707,109"/>
<area shape="poly" title=" " alt="" coords="452,31,579,73,578,78,451,36"/>
<area shape="rect" title=" " alt="" coords="732,81,820,109"/>
<area shape="poly" title=" " alt="" coords="465,28,717,78,716,83,464,33"/>
<area shape="rect" title=" " alt="" coords="844,81,924,109"/>
<area shape="poly" title=" " alt="" coords="464,24,624,44,829,78,828,83,623,50,464,29"/>
<area shape="rect" href="Authentication_8h.html" title="Declaration of the Authentication class." alt="" coords="5,157,134,184"/>
<area shape="poly" title=" " alt="" coords="360,23,308,26,248,36,185,54,156,67,128,83,101,111,82,144,78,141,97,108,125,79,153,62,184,49,246,30,308,21,360,17"/>
<area shape="rect" href="Loading_8h.html" title="Declaration of the Loading class." alt="" coords="139,81,224,109"/>
<area shape="poly" title=" " alt="" coords="372,36,238,78,236,73,370,31"/>
<area shape="rect" href="Playing_8h.html" title="Declaration of the Playing class." alt="" coords="310,81,392,109"/>
<area shape="poly" title=" " alt="" coords="403,35,373,71,369,67,399,32"/>
<area shape="poly" title=" " alt="" coords="102,182,202,224,200,229,100,187"/>
<area shape="rect" title=" " alt="" coords="64,232,163,260"/>
<area shape="poly" title=" " alt="" coords="80,184,100,218,96,220,75,186"/>
<area shape="poly" title=" " alt="" coords="190,108,237,217,232,219,185,110"/>
<area shape="poly" title=" " alt="" coords="163,111,103,150,100,146,160,107"/>
<area shape="poly" title=" " alt="" coords="179,110,148,185,130,220,126,217,143,183,174,108"/>
<area shape="poly" title=" " alt="" coords="345,110,293,186,267,221,263,218,289,183,340,107"/>
<area shape="rect" title=" " alt="" coords="360,157,470,184"/>
<area shape="poly" title=" " alt="" coords="364,107,395,143,391,147,360,111"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1f639e12141251259a876ef492f55df6" id="r_a1f639e12141251259a876ef492f55df6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f639e12141251259a876ef492f55df6">led</a>&#160;&#160;&#160;D4</td></tr>
<tr class="memdesc:a1f639e12141251259a876ef492f55df6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pin number for the built-in LED.  <br /></td></tr>
<tr class="separator:a1f639e12141251259a876ef492f55df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d" id="r_a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the system including WiFi connection, authentication, and loading and playing timeline data.  <br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f" id="r_afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main loop of the program.  <br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad4297dc9f5dee3aca1982088ebab51e3" id="r_ad4297dc9f5dee3aca1982088ebab51e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAuthentication.html">Authentication</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4297dc9f5dee3aca1982088ebab51e3">authentication</a></td></tr>
<tr class="memdesc:ad4297dc9f5dee3aca1982088ebab51e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instance of the <a class="el" href="classAuthentication.html">Authentication</a> class.  <br /></td></tr>
<tr class="separator:ad4297dc9f5dee3aca1982088ebab51e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01bcf11e5df59192e7f3302b0242552" id="r_aa01bcf11e5df59192e7f3302b0242552"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLoading.html">Loading</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa01bcf11e5df59192e7f3302b0242552">loading</a></td></tr>
<tr class="memdesc:aa01bcf11e5df59192e7f3302b0242552"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instance of the <a class="el" href="classLoading.html">Loading</a> class.  <br /></td></tr>
<tr class="separator:aa01bcf11e5df59192e7f3302b0242552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a244868866c8dc3e5d6170358b29b7ddd" id="r_a244868866c8dc3e5d6170358b29b7ddd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPlaying.html">Playing</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a244868866c8dc3e5d6170358b29b7ddd">playing</a></td></tr>
<tr class="memdesc:a244868866c8dc3e5d6170358b29b7ddd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instance of the <a class="el" href="classPlaying.html">Playing</a> class.  <br /></td></tr>
<tr class="separator:a244868866c8dc3e5d6170358b29b7ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd394e3bd0c2ba4048dea776c6557cd1" id="r_abd394e3bd0c2ba4048dea776c6557cd1"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd394e3bd0c2ba4048dea776c6557cd1">blueLEDPin</a> = D5</td></tr>
<tr class="memdesc:abd394e3bd0c2ba4048dea776c6557cd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pin number for the blue LED.  <br /></td></tr>
<tr class="separator:abd394e3bd0c2ba4048dea776c6557cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e0822e230092cca844cd048a9d6cd6" id="r_a12e0822e230092cca844cd048a9d6cd6"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12e0822e230092cca844cd048a9d6cd6">greenLEDPin</a> = D6</td></tr>
<tr class="memdesc:a12e0822e230092cca844cd048a9d6cd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pin number for the green LED.  <br /></td></tr>
<tr class="separator:a12e0822e230092cca844cd048a9d6cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a37a0731c2f8691dd9e3abf460fd1f9" id="r_a2a37a0731c2f8691dd9e3abf460fd1f9"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a37a0731c2f8691dd9e3abf460fd1f9">redLEDPin</a> = D7</td></tr>
<tr class="memdesc:a2a37a0731c2f8691dd9e3abf460fd1f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pin number for the red LED.  <br /></td></tr>
<tr class="separator:a2a37a0731c2f8691dd9e3abf460fd1f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17dc5624a7578d8675ef9fed1b260754" id="r_a17dc5624a7578d8675ef9fed1b260754"><td class="memItemLeft" align="right" valign="top">ESP8266WiFiMulti&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17dc5624a7578d8675ef9fed1b260754">WiFiMulti</a></td></tr>
<tr class="memdesc:a17dc5624a7578d8675ef9fed1b260754"><td class="mdescLeft">&#160;</td><td class="mdescRight">WiFi multi-client manager for ESP8266.  <br /></td></tr>
<tr class="separator:a17dc5624a7578d8675ef9fed1b260754"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main program file. </p>
<p>The main program - includes <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d" title="Sets up the system including WiFi connection, authentication, and loading and playing timeline data.">setup()</a> and <a class="el" href="#afe461d27b9c48d5921c00d521181f12f" title="Main loop of the program.">loop()</a>. Currently set to connect to Magic Poi Lite API on startup and fetch the current timeline. Then display the timeline on RGB LED's according to timings. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1f639e12141251259a876ef492f55df6" name="a1f639e12141251259a876ef492f55df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f639e12141251259a876ef492f55df6">&#9670;&#160;</a></span>led</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define led&#160;&#160;&#160;D4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pin number for the built-in LED. </p>
<p>This constant represents the pin number for the built-in LED on the D1 Mini. </p>

<p class="reference">Referenced by <a class="el" href="classPlaying.html#a4f81c9a5de20fa2242e31c1ee27df7a3">Playing::processTimelineData()</a>, <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>, and <a class="el" href="classPlaying.html#a77b5d5cc77492aefa350c6df293f33ee">Playing::setup()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main loop of the program. </p>
<p>This function is the main loop of the program. It repeatedly calls the play function to execute the playing process, which involves changing LED colors over time according to the timeline data. Additionally, it adds a delay of 5 seconds between each play iteration to control the timing of the LED color changes. </p>
<div class="fragment"><div class="line"><span class="lineno">  167</span>{</div>
<div class="line"><span class="lineno">  168</span>  <span class="comment">// Playing</span></div>
<div class="line"><span class="lineno">  169</span>  <a class="code hl_variable" href="#a244868866c8dc3e5d6170358b29b7ddd">playing</a>.<a class="code hl_function" href="classPlaying.html#a2d198fdbcde6de06036ed4186001548f">play</a>();</div>
<div class="line"><span class="lineno">  170</span>  <span class="comment">// Add delay if needed</span></div>
<div class="line"><span class="lineno">  171</span>  delay(5000); <span class="comment">// Example: Delay for 5 seconds between each play</span></div>
<div class="line"><span class="lineno">  172</span>}</div>
<div class="ttc" id="aMain_8cpp_html_a244868866c8dc3e5d6170358b29b7ddd"><div class="ttname"><a href="#a244868866c8dc3e5d6170358b29b7ddd">playing</a></div><div class="ttdeci">Playing playing</div><div class="ttdoc">Instance of the Playing class.</div><div class="ttdef"><b>Definition</b> Main.cpp:40</div></div>
<div class="ttc" id="aclassPlaying_html_a2d198fdbcde6de06036ed4186001548f"><div class="ttname"><a href="classPlaying.html#a2d198fdbcde6de06036ed4186001548f">Playing::play</a></div><div class="ttdeci">void play()</div><div class="ttdoc">Plays the timeline data.</div><div class="ttdef"><b>Definition</b> Playing.cpp:400</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classPlaying.html#a2d198fdbcde6de06036ed4186001548f">Playing::play()</a>, and <a class="el" href="#a244868866c8dc3e5d6170358b29b7ddd">playing</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="Main_8cpp_afe461d27b9c48d5921c00d521181f12f_cgraph.png" border="0" usemap="#aMain_8cpp_afe461d27b9c48d5921c00d521181f12f_cgraph" alt=""/></div>
<map name="aMain_8cpp_afe461d27b9c48d5921c00d521181f12f_cgraph" id="aMain_8cpp_afe461d27b9c48d5921c00d521181f12f_cgraph">
<area shape="rect" title="Main loop of the program." alt="" coords="5,5,55,33"/>
<area shape="rect" href="classPlaying.html#a2d198fdbcde6de06036ed4186001548f" title="Plays the timeline data." alt="" coords="103,5,208,33"/>
<area shape="poly" title=" " alt="" coords="55,17,87,17,87,22,55,22"/>
<area shape="rect" href="classPlaying.html#a5e24c92b5e869946d98abd178eff3061" title="Uses the timeline data to change LED colors over time." alt="" coords="256,5,444,33"/>
<area shape="poly" title=" " alt="" coords="208,17,240,17,240,22,208,22"/>
<area shape="rect" href="classPlaying.html#af3071d1fb83767f99774fd50ff65cc40" title="Changes the colors of the RGB LED based on the provided choice." alt="" coords="492,5,666,33"/>
<area shape="poly" title=" " alt="" coords="445,17,477,17,477,22,445,22"/>
</map>
</div>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the system including WiFi connection, authentication, and loading and playing timeline data. </p>
<p>This function initializes the system by establishing a WiFi connection, checking for saved authentication tokens, and handling authentication processes. It loads timeline data from the disk and sets up the playing process accordingly. If authentication is successful and timeline data is loaded successfully, it completes the setup process and prints a success message. Otherwise, it prints error messages indicating the failure. </p>
<div class="fragment"><div class="line"><span class="lineno">   88</span>{</div>
<div class="line"><span class="lineno">   89</span>  Serial.begin(115200);</div>
<div class="line"><span class="lineno">   90</span>  pinMode(<a class="code hl_define" href="#a1f639e12141251259a876ef492f55df6">led</a>, OUTPUT);</div>
<div class="line"><span class="lineno">   91</span>  digitalWrite(<a class="code hl_define" href="#a1f639e12141251259a876ef492f55df6">led</a>, HIGH); <span class="comment">// HIGH is off for D1 mini</span></div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>  <span class="comment">// set the digital pins as outputs</span></div>
<div class="line"><span class="lineno">   94</span>  pinMode(<a class="code hl_variable" href="#a12e0822e230092cca844cd048a9d6cd6">greenLEDPin</a>, OUTPUT);</div>
<div class="line"><span class="lineno">   95</span>  pinMode(<a class="code hl_variable" href="#a2a37a0731c2f8691dd9e3abf460fd1f9">redLEDPin</a>, OUTPUT);</div>
<div class="line"><span class="lineno">   96</span>  pinMode(<a class="code hl_variable" href="#abd394e3bd0c2ba4048dea776c6557cd1">blueLEDPin</a>, OUTPUT);</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>  <span class="comment">// WiFi connection: </span></div>
<div class="line"><span class="lineno">   99</span>  WiFi.mode(WIFI_STA);</div>
<div class="line"><span class="lineno">  100</span>  <a class="code hl_variable" href="#a17dc5624a7578d8675ef9fed1b260754">WiFiMulti</a>.addAP(WIFI_SSID, WIFI_PASSWORD);</div>
<div class="line"><span class="lineno">  101</span>  Serial.println(<span class="stringliteral">&quot;Connecting to WiFi&quot;</span>);</div>
<div class="line"><span class="lineno">  102</span>  <span class="keywordflow">while</span> (<a class="code hl_variable" href="#a17dc5624a7578d8675ef9fed1b260754">WiFiMulti</a>.run() != WL_CONNECTED)</div>
<div class="line"><span class="lineno">  103</span>  {</div>
<div class="line"><span class="lineno">  104</span>    Serial.print(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  105</span>    delay(500);</div>
<div class="line"><span class="lineno">  106</span>  }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>  Serial.println(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  109</span>  Serial.println(<span class="stringliteral">&quot;WiFi connected&quot;</span>);</div>
<div class="line"><span class="lineno">  110</span>  Serial.println(<span class="stringliteral">&quot;IP address: &quot;</span>);</div>
<div class="line"><span class="lineno">  111</span>  Serial.println(WiFi.localIP());</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>  <span class="comment">// Setup: Connection &amp; Authentication</span></div>
<div class="line"><span class="lineno">  114</span>  Serial.println(<span class="stringliteral">&quot;Setup: Connection &amp; Authentication&quot;</span>);</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>  <span class="comment">// Connecting to WiFi and authenticating</span></div>
<div class="line"><span class="lineno">  117</span>  <span class="keywordtype">bool</span> isAuthenticated = <a class="code hl_variable" href="#ad4297dc9f5dee3aca1982088ebab51e3">authentication</a>.<a class="code hl_function" href="classAuthentication.html#a6e13c5fb0a17675cbe2bf781111cf54d">checkSavedToken</a>();</div>
<div class="line"><span class="lineno">  118</span>  isAuthenticated = <span class="keyword">false</span>; <span class="comment">//test re-auth - todo: tie this to a button press</span></div>
<div class="line"><span class="lineno">  119</span>  <span class="comment">//Check disk for saved JWT auth and use it:</span></div>
<div class="line"><span class="lineno">  120</span>  <span class="keywordflow">if</span> (isAuthenticated)</div>
<div class="line"><span class="lineno">  121</span>  {</div>
<div class="line"><span class="lineno">  122</span>    Serial.println(<span class="stringliteral">&quot;Authentication found. Using saved.&quot;</span>);</div>
<div class="line"><span class="lineno">  123</span>    <span class="comment">// Loading data</span></div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="#aa01bcf11e5df59192e7f3302b0242552">loading</a>.<a class="code hl_function" href="classLoading.html#a4381fcc49446bf5dbee9c3157c689676">load</a>()){</div>
<div class="line"><span class="lineno">  125</span>          Serial.println(<span class="stringliteral">&quot;LOADED AND SAVED TIMELINE SUCCESSFULLY&quot;</span>);</div>
<div class="line"><span class="lineno">  126</span>          <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a244868866c8dc3e5d6170358b29b7ddd">playing</a>.<a class="code hl_function" href="classPlaying.html#a77b5d5cc77492aefa350c6df293f33ee">setup</a>()){</div>
<div class="line"><span class="lineno">  127</span>            Serial.println(<span class="stringliteral">&quot;SETUP COMPLETE&quot;</span>);</div>
<div class="line"><span class="lineno">  128</span>          }</div>
<div class="line"><span class="lineno">  129</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  130</span>          Serial.println(<span class="stringliteral">&quot;LOADING AND SAVING TIMELINE UNSUCCESSFUL&quot;</span>);</div>
<div class="line"><span class="lineno">  131</span>        } <span class="comment">//todo: loading needs to tell us if authentication is unsuccessful, so we can try password auth?</span></div>
<div class="line"><span class="lineno">  132</span>  }</div>
<div class="line"><span class="lineno">  133</span>  <span class="keywordflow">else</span> <span class="comment">//no saved JWT found: </span></div>
<div class="line"><span class="lineno">  134</span>  {</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordtype">bool</span> isAuthenticating = <a class="code hl_variable" href="#ad4297dc9f5dee3aca1982088ebab51e3">authentication</a>.<a class="code hl_function" href="classAuthentication.html#aeb33404cd51828edf0db0cdce3c38b32">authenticate</a>();</div>
<div class="line"><span class="lineno">  136</span>    <span class="keywordflow">if</span>(isAuthenticating){ <span class="comment">//auth success</span></div>
<div class="line"><span class="lineno">  137</span>      isAuthenticated = <a class="code hl_variable" href="#ad4297dc9f5dee3aca1982088ebab51e3">authentication</a>.<a class="code hl_function" href="classAuthentication.html#a6e13c5fb0a17675cbe2bf781111cf54d">checkSavedToken</a>(); <span class="comment">//check again for testing, just for testing?</span></div>
<div class="line"><span class="lineno">  138</span>      <span class="keywordflow">if</span>(isAuthenticated){ </div>
<div class="line"><span class="lineno">  139</span>        Serial.println(<span class="stringliteral">&quot;Authenticated using login success. Should be saved now, using..&quot;</span>);</div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="#aa01bcf11e5df59192e7f3302b0242552">loading</a>.<a class="code hl_function" href="classLoading.html#a4381fcc49446bf5dbee9c3157c689676">load</a>()){</div>
<div class="line"><span class="lineno">  141</span>          Serial.println(<span class="stringliteral">&quot;LOADED AND SAVED TIMELINE SUCCESSFULLY&quot;</span>);</div>
<div class="line"><span class="lineno">  142</span>          <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a244868866c8dc3e5d6170358b29b7ddd">playing</a>.<a class="code hl_function" href="classPlaying.html#a77b5d5cc77492aefa350c6df293f33ee">setup</a>()){</div>
<div class="line"><span class="lineno">  143</span>            Serial.println(<span class="stringliteral">&quot;SETUP COMPLETE&quot;</span>);</div>
<div class="line"><span class="lineno">  144</span>          }</div>
<div class="line"><span class="lineno">  145</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  146</span>          Serial.println(<span class="stringliteral">&quot;LOADING AND SAVING TIMELINE UNSUCCESSFUL&quot;</span>);</div>
<div class="line"><span class="lineno">  147</span>        }</div>
<div class="line"><span class="lineno">  148</span>      } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  149</span>      {</div>
<div class="line"><span class="lineno">  150</span>        Serial.println(<span class="stringliteral">&quot;Auth check saved JWT after password login failed&quot;</span>);</div>
<div class="line"><span class="lineno">  151</span>      }</div>
<div class="line"><span class="lineno">  152</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  153</span>    {</div>
<div class="line"><span class="lineno">  154</span>      Serial.println(<span class="stringliteral">&quot;Failed to authenticate with password&quot;</span>);</div>
<div class="line"><span class="lineno">  155</span>    }</div>
<div class="line"><span class="lineno">  156</span>  }</div>
<div class="line"><span class="lineno">  157</span>}</div>
<div class="ttc" id="aMain_8cpp_html_a12e0822e230092cca844cd048a9d6cd6"><div class="ttname"><a href="#a12e0822e230092cca844cd048a9d6cd6">greenLEDPin</a></div><div class="ttdeci">const int greenLEDPin</div><div class="ttdoc">Pin number for the green LED.</div><div class="ttdef"><b>Definition</b> Main.cpp:61</div></div>
<div class="ttc" id="aMain_8cpp_html_a17dc5624a7578d8675ef9fed1b260754"><div class="ttname"><a href="#a17dc5624a7578d8675ef9fed1b260754">WiFiMulti</a></div><div class="ttdeci">ESP8266WiFiMulti WiFiMulti</div><div class="ttdoc">WiFi multi-client manager for ESP8266.</div><div class="ttdef"><b>Definition</b> Main.cpp:75</div></div>
<div class="ttc" id="aMain_8cpp_html_a1f639e12141251259a876ef492f55df6"><div class="ttname"><a href="#a1f639e12141251259a876ef492f55df6">led</a></div><div class="ttdeci">#define led</div><div class="ttdoc">Pin number for the built-in LED.</div><div class="ttdef"><b>Definition</b> Main.cpp:47</div></div>
<div class="ttc" id="aMain_8cpp_html_a2a37a0731c2f8691dd9e3abf460fd1f9"><div class="ttname"><a href="#a2a37a0731c2f8691dd9e3abf460fd1f9">redLEDPin</a></div><div class="ttdeci">const int redLEDPin</div><div class="ttdoc">Pin number for the red LED.</div><div class="ttdef"><b>Definition</b> Main.cpp:68</div></div>
<div class="ttc" id="aMain_8cpp_html_aa01bcf11e5df59192e7f3302b0242552"><div class="ttname"><a href="#aa01bcf11e5df59192e7f3302b0242552">loading</a></div><div class="ttdeci">Loading loading</div><div class="ttdoc">Instance of the Loading class.</div><div class="ttdef"><b>Definition</b> Main.cpp:33</div></div>
<div class="ttc" id="aMain_8cpp_html_abd394e3bd0c2ba4048dea776c6557cd1"><div class="ttname"><a href="#abd394e3bd0c2ba4048dea776c6557cd1">blueLEDPin</a></div><div class="ttdeci">const int blueLEDPin</div><div class="ttdoc">Pin number for the blue LED.</div><div class="ttdef"><b>Definition</b> Main.cpp:54</div></div>
<div class="ttc" id="aMain_8cpp_html_ad4297dc9f5dee3aca1982088ebab51e3"><div class="ttname"><a href="#ad4297dc9f5dee3aca1982088ebab51e3">authentication</a></div><div class="ttdeci">Authentication authentication</div><div class="ttdoc">Instance of the Authentication class.</div><div class="ttdef"><b>Definition</b> Main.cpp:26</div></div>
<div class="ttc" id="aclassAuthentication_html_a6e13c5fb0a17675cbe2bf781111cf54d"><div class="ttname"><a href="classAuthentication.html#a6e13c5fb0a17675cbe2bf781111cf54d">Authentication::checkSavedToken</a></div><div class="ttdeci">bool checkSavedToken()</div><div class="ttdoc">Checks for a saved JWT token and loads it if available.</div><div class="ttdef"><b>Definition</b> Authentication.cpp:177</div></div>
<div class="ttc" id="aclassAuthentication_html_aeb33404cd51828edf0db0cdce3c38b32"><div class="ttname"><a href="classAuthentication.html#aeb33404cd51828edf0db0cdce3c38b32">Authentication::authenticate</a></div><div class="ttdeci">bool authenticate()</div><div class="ttdoc">Authenticates the client with the server.</div><div class="ttdef"><b>Definition</b> Authentication.cpp:117</div></div>
<div class="ttc" id="aclassLoading_html_a4381fcc49446bf5dbee9c3157c689676"><div class="ttname"><a href="classLoading.html#a4381fcc49446bf5dbee9c3157c689676">Loading::load</a></div><div class="ttdeci">bool load()</div><div class="ttdoc">Loads data required for the application.</div><div class="ttdef"><b>Definition</b> Loading.cpp:181</div></div>
<div class="ttc" id="aclassPlaying_html_a77b5d5cc77492aefa350c6df293f33ee"><div class="ttname"><a href="classPlaying.html#a77b5d5cc77492aefa350c6df293f33ee">Playing::setup</a></div><div class="ttdeci">bool setup()</div><div class="ttdoc">Sets up the playing process.</div><div class="ttdef"><b>Definition</b> Playing.cpp:202</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classAuthentication.html#aeb33404cd51828edf0db0cdce3c38b32">Authentication::authenticate()</a>, <a class="el" href="#ad4297dc9f5dee3aca1982088ebab51e3">authentication</a>, <a class="el" href="#abd394e3bd0c2ba4048dea776c6557cd1">blueLEDPin</a>, <a class="el" href="classAuthentication.html#a6e13c5fb0a17675cbe2bf781111cf54d">Authentication::checkSavedToken()</a>, <a class="el" href="#a12e0822e230092cca844cd048a9d6cd6">greenLEDPin</a>, <a class="el" href="#a1f639e12141251259a876ef492f55df6">led</a>, <a class="el" href="classLoading.html#a4381fcc49446bf5dbee9c3157c689676">Loading::load()</a>, <a class="el" href="#aa01bcf11e5df59192e7f3302b0242552">loading</a>, <a class="el" href="#a244868866c8dc3e5d6170358b29b7ddd">playing</a>, <a class="el" href="#a2a37a0731c2f8691dd9e3abf460fd1f9">redLEDPin</a>, <a class="el" href="classPlaying.html#a77b5d5cc77492aefa350c6df293f33ee">Playing::setup()</a>, and <a class="el" href="#a17dc5624a7578d8675ef9fed1b260754">WiFiMulti</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="Main_8cpp_a4fc01d736fe50cf5b977f755b675f11d_cgraph.png" border="0" usemap="#aMain_8cpp_a4fc01d736fe50cf5b977f755b675f11d_cgraph" alt=""/></div>
<map name="aMain_8cpp_a4fc01d736fe50cf5b977f755b675f11d_cgraph" id="aMain_8cpp_a4fc01d736fe50cf5b977f755b675f11d_cgraph">
<area shape="rect" title="Sets up the system including WiFi connection, authentication, and loading and playing timeline data." alt="" coords="5,114,63,142"/>
<area shape="rect" href="classAuthentication.html#aeb33404cd51828edf0db0cdce3c38b32" title="Authenticates the client with the server." alt="" coords="111,19,317,47"/>
<area shape="poly" title=" " alt="" coords="46,112,73,85,109,60,131,50,133,55,112,65,77,90,50,116"/>
<area shape="rect" href="classAuthentication.html#a6e13c5fb0a17675cbe2bf781111cf54d" title="Checks for a saved JWT token and loads it if available." alt="" coords="113,75,315,119"/>
<area shape="poly" title=" " alt="" coords="63,120,97,114,97,120,63,126"/>
<area shape="rect" href="classLoading.html#a4381fcc49446bf5dbee9c3157c689676" title="Loads data required for the application." alt="" coords="160,143,268,171"/>
<area shape="poly" title=" " alt="" coords="63,130,145,143,144,148,63,135"/>
<area shape="rect" href="classPlaying.html#a77b5d5cc77492aefa350c6df293f33ee" title="Sets up the playing process." alt="" coords="157,247,271,275"/>
<area shape="poly" title=" " alt="" coords="56,140,183,236,180,240,53,144"/>
<area shape="rect" href="classAuthentication.html#a7a851cf9bcfc0010ecf0d10626312d6f" title="Saves a JWT token to a file on LittleFS." alt="" coords="365,5,582,50"/>
<area shape="poly" title=" " alt="" coords="317,28,349,28,349,33,318,34"/>
<area shape="rect" href="classAuthentication.html#ac67cb64472ed5e95794d07ce9f5e1b86" title="Reads JWT token from a file stored on LittleFS." alt="" coords="366,75,581,119"/>
<area shape="poly" title=" " alt="" coords="315,94,350,94,350,100,315,100"/>
<area shape="rect" href="classLoading.html#abddd24f8fa89d2c94d24b499485d425f" title="Retrieves the timeline data from the server based on the specified timeline number." alt="" coords="395,143,553,171"/>
<area shape="poly" title=" " alt="" coords="268,154,379,154,379,160,268,160"/>
<area shape="rect" href="classLoading.html#a80e24e5cf50078c75593eff83eae55e2" title="Retrieves the current timeline number from the server." alt="" coords="369,195,579,223"/>
<area shape="poly" title=" " alt="" coords="269,165,387,189,386,194,268,170"/>
<area shape="rect" href="classLoading.html#a48e8f0be6302e3b3eb36c2fd9a1a7606" title="Saves the timeline data to a file." alt="" coords="654,143,822,171"/>
<area shape="poly" title=" " alt="" coords="553,154,638,154,638,160,553,160"/>
<area shape="rect" href="classPlaying.html#aff641fcbb968459528336d2c3732b9bd" title="Loads the timeline data from the disk." alt="" coords="393,247,555,275"/>
<area shape="poly" title=" " alt="" coords="271,258,377,258,377,264,271,264"/>
<area shape="rect" href="classPlaying.html#a4f81c9a5de20fa2242e31c1ee27df7a3" title="Processes the timeline data received from the server." alt="" coords="630,273,846,300"/>
<area shape="poly" title=" " alt="" coords="271,270,365,284,494,290,615,289,615,294,494,295,365,289,271,275"/>
<area shape="poly" title=" " alt="" coords="556,266,616,272,615,277,555,271"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad4297dc9f5dee3aca1982088ebab51e3" name="ad4297dc9f5dee3aca1982088ebab51e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4297dc9f5dee3aca1982088ebab51e3">&#9670;&#160;</a></span>authentication</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAuthentication.html">Authentication</a> authentication</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instance of the <a class="el" href="classAuthentication.html">Authentication</a> class. </p>
<p>This object is used for handling authentication operations. </p>

<p class="reference">Referenced by <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>.</p>

</div>
</div>
<a id="abd394e3bd0c2ba4048dea776c6557cd1" name="abd394e3bd0c2ba4048dea776c6557cd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd394e3bd0c2ba4048dea776c6557cd1">&#9670;&#160;</a></span>blueLEDPin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int blueLEDPin = D5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pin number for the blue LED. </p>
<p>This constant represents the pin number for the blue LED. </p>

<p class="reference">Referenced by <a class="el" href="classPlaying.html#af3071d1fb83767f99774fd50ff65cc40">Playing::changeColours()</a>, and <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>.</p>

</div>
</div>
<a id="a12e0822e230092cca844cd048a9d6cd6" name="a12e0822e230092cca844cd048a9d6cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12e0822e230092cca844cd048a9d6cd6">&#9670;&#160;</a></span>greenLEDPin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int greenLEDPin = D6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pin number for the green LED. </p>
<p>This constant represents the pin number for the green LED. </p>

<p class="reference">Referenced by <a class="el" href="classPlaying.html#af3071d1fb83767f99774fd50ff65cc40">Playing::changeColours()</a>, and <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>.</p>

</div>
</div>
<a id="aa01bcf11e5df59192e7f3302b0242552" name="aa01bcf11e5df59192e7f3302b0242552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa01bcf11e5df59192e7f3302b0242552">&#9670;&#160;</a></span>loading</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLoading.html">Loading</a> loading</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instance of the <a class="el" href="classLoading.html">Loading</a> class. </p>
<p>This object is used for loading timeline data. </p>

<p class="reference">Referenced by <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>.</p>

</div>
</div>
<a id="a244868866c8dc3e5d6170358b29b7ddd" name="a244868866c8dc3e5d6170358b29b7ddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a244868866c8dc3e5d6170358b29b7ddd">&#9670;&#160;</a></span>playing</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPlaying.html">Playing</a> playing</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instance of the <a class="el" href="classPlaying.html">Playing</a> class. </p>
<p>This object is used for playing timeline data. </p>

<p class="reference">Referenced by <a class="el" href="#afe461d27b9c48d5921c00d521181f12f">loop()</a>, and <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>.</p>

</div>
</div>
<a id="a2a37a0731c2f8691dd9e3abf460fd1f9" name="a2a37a0731c2f8691dd9e3abf460fd1f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a37a0731c2f8691dd9e3abf460fd1f9">&#9670;&#160;</a></span>redLEDPin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int redLEDPin = D7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pin number for the red LED. </p>
<p>This constant represents the pin number for the red LED. </p>

<p class="reference">Referenced by <a class="el" href="classPlaying.html#af3071d1fb83767f99774fd50ff65cc40">Playing::changeColours()</a>, and <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>.</p>

</div>
</div>
<a id="a17dc5624a7578d8675ef9fed1b260754" name="a17dc5624a7578d8675ef9fed1b260754"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17dc5624a7578d8675ef9fed1b260754">&#9670;&#160;</a></span>WiFiMulti</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ESP8266WiFiMulti WiFiMulti</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>WiFi multi-client manager for ESP8266. </p>
<p>This object is used for managing multiple WiFi connections on ESP8266. </p>

<p class="reference">Referenced by <a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
